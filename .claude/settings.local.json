{
  "permissions": {
    "allow": [
      "WebFetch(domain:haplopainter.sourceforge.net)",
      "WebFetch(domain:academic.oup.com)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:www.researchgate.net)",
      "WebFetch(domain:www.semanticscholar.org)",
      "WebFetch(domain:mybiosoftware.com)",
      "WebFetch(domain:humangenetics.medicine.uiowa.edu)",
      "WebFetch(domain:bio.libretexts.org)",
      "Bash(.venv/bin/python:*)",
      "Bash(python run_analysis.py:*)",
      "Bash(python3 run_analysis.py:*)",
      "Bash(ls:*)",
      "Bash(cat:*)",
      "Bash(python3:*)",
      "Bash(chmod:*)",
      "Bash(uv:*)",
      "Bash(src/lodlink/__init__.py << 'EOF'\n\"\"\"\nLODLink ‚Äî Pipeline d'Analyse de Liaison G√©n√©tique\n=================================================\n\nAlternative moderne √† Merlin pour le calcul de LOD scores param√©triques\net non-param√©triques, avec visualisation de type HaploPainter.\n\nModules:\n    config: Configuration des mod√®les de maladie\n    data_parser: Chargement des donn√©es \\(pedigree, map, freq, geno\\)\n    pedigree: Analyse et manipulation du pedigree\n    lod_engine: Calcul des LOD scores \\(param√©trique et NPL\\)\n    haplopainter: Visualisations de type HaploPainter\n    html_viz: G√©n√©ration de rapports HTML interactifs\n\"\"\"\n\n__version__ = \"1.0.0\"\n__author__ = \"Alexandre MATHIEU\"\n__email__ = \"amathieu@pasteur.fr\"\n\nfrom .config import DiseaseModel\nfrom .data_parser import load_all_data\nfrom .pedigree import Pedigree\nfrom .lod_engine import LinkageAnalysis\nfrom .haplopainter import HaploPainterViz, plot_genome_wide_lod, generate_results_table\nfrom .html_viz import generate_interactive_html\n\n__all__ = [\n    \"DiseaseModel\",\n    \"load_all_data\",\n    \"Pedigree\",\n    \"LinkageAnalysis\",\n    \"HaploPainterViz\",\n    \"plot_genome_wide_lod\",\n    \"generate_results_table\",\n    \"generate_interactive_html\",\n]\nEOF)",
      "Bash(grep:*)",
      "Bash(MANIFEST.in << 'EOF'\ninclude README.md\ninclude LICENSE\ninclude pyproject.toml\ninclude requirements.txt\nrecursive-include src/lodlink *.py\nEOF)",
      "Bash(LICENSE << 'EOF'\nMIT License\n\nCopyright \\(c\\) 2025 Alexandre MATHIEU\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files \\(the \"Software\"\\), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\nEOF)",
      "Bash(README_PACKAGE.md << 'EOF'\n# LODLink\n\n[![Python Version]\\(https://img.shields.io/badge/python-3.10+-blue.svg\\)]\\(https://www.python.org/downloads/\\)\n[![License: MIT]\\(https://img.shields.io/badge/License-MIT-yellow.svg\\)]\\(https://opensource.org/licenses/MIT\\)\n\nPipeline d'analyse de liaison g√©n√©tique moderne - Alternative √† Merlin avec LOD scores param√©triques/NPL et visualisations HaploPainter.\n\n## Fonctionnalit√©s\n\nüß¨ **Analyse de Liaison Compl√®te**\n- LOD scores param√©triques \\(algorithme Elston-Stewart\\)\n- Scores NPL non-param√©triques \\(Kong & Cox\\)\n- Lissage multipoint gaussien\n- Support de mod√®les dominant/r√©cessif\n\nüìä **Visualisations**\n- Pedigrees style HaploPainter avec haplotypes color√©s\n- Graphiques interactifs Plotly\n- Rapports HTML avec annotations g√©niques \\(Ensembl API\\)\n- Manhattan plots genome-wide\n\n‚ö° **Performance**\n- Thinning intelligent des marqueurs\n- Parsing efficace des gros fichiers de g√©notypage\n- Support multi-chromosomes\n\n## Installation Rapide\n\n### Avec uv \\(recommand√©\\)\n\n```bash\nuv pip install lodlink\n```\n\n### Avec pip\n\n```bash\npip install lodlink\n```\n\n## Utilisation\n\n```bash\n# Analyse genome-wide standard\nlodlink --html --extend-region 3.0\n\n# Mod√®le r√©cessif, chromosome 6\nlodlink --model recessive --chr 6 --html\n\n# Aide compl√®te\nlodlink --help\n```\n\n## Format des Donn√©es\n\n**Pedigree** \\(format Merlin\\):\n```\nFamilyID  IndivID  FatherID  MotherID  Sex  Affection\n1         1        0         0         1    2\n```\n\n**Carte g√©n√©tique**:\n```\nCHR  MARKER    cM     bp\n1    rs12345   0.0    12345\n```\n\n## Documentation\n\nDocumentation compl√®te: [GitHub Repository]\\(https://github.com/amathieu/lodlink\\)\n\n## Citation\n\nSi vous utilisez LODLink dans vos recherches, veuillez citer:\n\n```\nMATHIEU A. \\(2025\\). LODLink: Modern genetic linkage analysis pipeline.\nhttps://github.com/amathieu/lodlink\n```\n\n## Licence\n\nMIT License - voir LICENSE pour plus de d√©tails.\n\n## Support\n\n- Issues: https://github.com/amathieu/lodlink/issues\n- Email: amathieu@pasteur.fr\nEOF)",
      "Bash(PUBLISHING.md << 'EOF'\n# Guide de Publication sur PyPI\n\n## Pr√©requis\n\n1. Compte PyPI: https://pypi.org/account/register/\n2. Compte TestPyPI \\(optionnel\\): https://test.pypi.org/account/register/\n3. Token d'API PyPI configur√©\n\n## Configuration du Token PyPI\n\n### Cr√©er un token API sur PyPI\n\n1. Aller sur https://pypi.org/manage/account/token/\n2. Cr√©er un nouveau token avec le scope \"Entire account\"\n3. Copier le token \\(il commence par `pypi-`\\)\n\n### Configurer uv avec le token\n\n```bash\n# M√©thode 1: Variable d'environnement\nexport UV_PUBLISH_TOKEN=\"pypi-...\"\n\n# M√©thode 2: Dans ~/.pypirc\ncat > ~/.pypirc << 'PYPIRC'\n[pypi]\nusername = __token__\npassword = pypi-...\n\n[testpypi]\nusername = __token__\npassword = pypi-...\nPYPIRC\n```\n\n## Pr√©paration de la Publication\n\n### 1. V√©rifier la version\n\nMettre √† jour `pyproject.toml`:\n```toml\n[project]\nversion = \"1.0.0\"  # Incr√©menter selon semver\n```\n\n### 2. Mettre √† jour le CHANGELOG\n\nAjouter une section pour la nouvelle version dans `CHANGELOG.md`:\n```markdown\n## [1.0.0] - 2025-02-16\n\n### Added\n- Premi√®re version publique\n- Support complet de l'analyse de liaison\n- Visualisations HaploPainter\n- Rapport HTML interactif\n```\n\n### 3. V√©rifier que tout fonctionne\n\n```bash\n# Synchroniser les d√©pendances\nuv sync\n\n# Tester le package\nuv run lodlink --help\n\n# V√©rifier le formatage\nuv run black --check src/\n\n# V√©rifier le linting\nuv run ruff check src/\n```\n\n### 4. Nettoyer les anciens builds\n\n```bash\nrm -rf dist/ build/ *.egg-info\n```\n\n## Test sur TestPyPI \\(Recommand√©\\)\n\n### 1. Construire le package\n\n```bash\nuv build\n```\n\nCela g√©n√®re:\n- `dist/lodlink-1.0.0-py3-none-any.whl` \\(wheel\\)\n- `dist/lodlink-1.0.0.tar.gz` \\(source distribution\\)\n\n### 2. Publier sur TestPyPI\n\n```bash\nuv publish --index-url https://test.pypi.org/legacy/\n```\n\n### 3. Tester l'installation depuis TestPyPI\n\n```bash\n# Cr√©er un environnement de test\nmkdir test_install && cd test_install\nuv venv\nsource .venv/bin/activate\n\n# Installer depuis TestPyPI\nuv pip install --index-url https://test.pypi.org/simple/ lodlink\n\n# Tester la commande\nlodlink --help\n\n# Nettoyer\ncd ..\nrm -rf test_install\n```\n\n## Publication sur PyPI \\(Production\\)\n\n### 1. V√©rifier une derni√®re fois\n\n```bash\n# Relire le README\ncat README_PACKAGE.md\n\n# V√©rifier les m√©tadonn√©es\ncat pyproject.toml\n\n# V√©rifier les fichiers inclus\ntar -tzf dist/lodlink-*.tar.gz | head -20\n```\n\n### 2. Publier\n\n```bash\nuv publish\n```\n\n### 3. V√©rifier la publication\n\nAller sur: https://pypi.org/project/lodlink/\n\n### 4. Tester l'installation\n\n```bash\n# Dans un nouvel environnement\nuv pip install lodlink\n\n# V√©rifier que √ßa fonctionne\nlodlink --help\n```\n\n## Mise √† Jour d'une Version Existante\n\n### 1. Incr√©menter la version\n\nModifier `pyproject.toml`:\n```toml\nversion = \"1.0.1\"  # ou 1.1.0, ou 2.0.0 selon semver\n```\n\n### 2. Mettre √† jour le CHANGELOG\n\n```markdown\n## [1.0.1] - 2025-02-17\n\n### Fixed\n- Bug fix description\n```\n\n### 3. Republier\n\n```bash\n# Nettoyer\nrm -rf dist/\n\n# Reconstruire\nuv build\n\n# Publier\nuv publish\n```\n\n## Semantic Versioning \\(semver\\)\n\n- **MAJOR** \\(1.0.0 ‚Üí 2.0.0\\): Changements incompatibles avec l'API\n- **MINOR** \\(1.0.0 ‚Üí 1.1.0\\): Nouvelles fonctionnalit√©s compatibles\n- **PATCH** \\(1.0.0 ‚Üí 1.0.1\\): Corrections de bugs\n\n## D√©pannage\n\n### Erreur: \"File already exists\"\n\nVous essayez de republier la m√™me version. Incr√©mentez la version dans `pyproject.toml`.\n\n### Erreur: \"Invalid credentials\"\n\nV√©rifiez votre token PyPI dans `~/.pypirc` ou la variable d'environnement.\n\n### Le package ne s'installe pas correctement\n\nV√©rifiez:\n- `MANIFEST.in` inclut tous les fichiers n√©cessaires\n- `pyproject.toml` a les bonnes d√©pendances\n- Le package fonctionne en local avec `uv run lodlink`\n\n### Les d√©pendances ne s'installent pas\n\nV√©rifiez que `dependencies` dans `pyproject.toml` est correct et complet.\n\n## Post-Publication\n\n### 1. Cr√©er un tag Git\n\n```bash\ngit tag -a v1.0.0 -m \"Release version 1.0.0\"\ngit push origin v1.0.0\n```\n\n### 2. Cr√©er une Release GitHub\n\n1. Aller sur GitHub ‚Üí Releases\n2. \"Create a new release\"\n3. Choisir le tag v1.0.0\n4. Copier le CHANGELOG\n5. Publier\n\n### 3. Annoncer\n\n- Mettre √† jour le README avec le lien PyPI\n- Annoncer sur les canaux appropri√©s\n- Mettre √† jour la documentation\n\n## Checklist Compl√®te\n\nAvant de publier:\n\n- [ ] Version incr√©ment√©e dans `pyproject.toml`\n- [ ] CHANGELOG mis √† jour\n- [ ] README √† jour\n- [ ] Tests passent \\(`uv run pytest`\\)\n- [ ] Formatage correct \\(`uv run black src/`\\)\n- [ ] Pas d'erreurs de linting \\(`uv run ruff check src/`\\)\n- [ ] Package fonctionne localement\n- [ ] Test√© sur TestPyPI\n- [ ] `dist/` nettoy√©\n- [ ] Build cr√©√© \\(`uv build`\\)\n- [ ] Publi√© \\(`uv publish`\\)\n- [ ] Tag Git cr√©√©\n- [ ] Release GitHub cr√©√©e\n\n## Ressources\n\n- PyPI: https://pypi.org\n- TestPyPI: https://test.pypi.org\n- Packaging Python: https://packaging.python.org\n- Semantic Versioning: https://semver.org\n- uv docs: https://docs.astral.sh/uv/\nEOF)",
      "Bash(CLAUDE.md << 'EOF'\n# Guide Claude pour LODLink\n\nCe fichier documente le projet LODLink pour les agents Claude qui travailleront dessus.\n\n## üéØ Vue d'Ensemble du Projet\n\n**LODLink** est un pipeline d'analyse de liaison g√©n√©tique moderne, alternative √† Merlin.\n\n- **Langage**: Python 3.10+\n- **Gestionnaire de packages**: uv \\(moderne, rapide\\)\n- **Type**: Package Python installable\n- **Structure**: src layout \\(standard Python\\)\n- **License**: MIT\n\n## üì¶ Architecture du Package\n\n```\nlodlink/\n‚îú‚îÄ‚îÄ src/lodlink/              # Code source du package\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py          # Exports publics\n‚îÇ   ‚îú‚îÄ‚îÄ cli.py               # CLI principale \\(entry point\\)\n‚îÇ   ‚îú‚îÄ‚îÄ config.py            # Mod√®les de maladie, constantes\n‚îÇ   ‚îú‚îÄ‚îÄ data_parser.py       # Parsing des fichiers volumineux\n‚îÇ   ‚îú‚îÄ‚îÄ pedigree.py          # Analyse de pedigree \\(peeling\\)\n‚îÇ   ‚îú‚îÄ‚îÄ lod_engine.py        # LOD scores \\(Elston-Stewart, NPL\\)\n‚îÇ   ‚îú‚îÄ‚îÄ haplopainter.py      # Visualisations pedigree\n‚îÇ   ‚îî‚îÄ‚îÄ html_viz.py          # Rapports HTML + Ensembl API\n‚îÇ\n‚îú‚îÄ‚îÄ data/                     # Donn√©es d'entr√©e \\(gitignored\\)\n‚îÇ   ‚îú‚îÄ‚îÄ pedfile.pro          # Pedigree \\(format Merlin\\)\n‚îÇ   ‚îú‚îÄ‚îÄ map                  # Carte g√©n√©tique \\(8 MB\\)\n‚îÇ   ‚îú‚îÄ‚îÄ freq                 # Fr√©quences all√©liques \\(8 MB\\)\n‚îÇ   ‚îî‚îÄ‚îÄ genotyping           # G√©notypes \\(900 MB!\\)\n‚îÇ\n‚îú‚îÄ‚îÄ results/                  # R√©sultats \\(gitignored, r√©g√©n√©rables\\)\n‚îÇ   ‚îú‚îÄ‚îÄ linkage_results_interactive.html\n‚îÇ   ‚îú‚îÄ‚îÄ haplopainter_*.png\n‚îÇ   ‚îî‚îÄ‚îÄ lod_*.tsv\n‚îÇ\n‚îú‚îÄ‚îÄ pyproject.toml           # Configuration uv/pip ‚≠ê\n‚îú‚îÄ‚îÄ uv.lock                  # Lock file \\(gitignored\\)\n‚îî‚îÄ‚îÄ .venv/                   # Virtual env \\(gitignored\\)\n```\n\n## üîß Gestion des D√©pendances avec uv\n\n### ‚ö†Ô∏è R√àGLES CRITIQUES\n\n**TOUJOURS utiliser `uv` pour Python - JAMAIS `python` ou `pip` directement !**\n\n```bash\n# ‚úÖ CORRECT - Ex√©cuter du code Python\nuv run lodlink --html\nuv run python script.py\nuv run pytest\n\n# ‚ùå INCORRECT - Ne pas utiliser\npython script.py\nlodlink --html\npytest\n\n# ‚úÖ CORRECT - G√©rer les packages\nuv add numpy matplotlib\nuv add --dev pytest black\nuv sync\n\n# ‚ùå INCORRECT - Ne pas utiliser\npip install numpy\npip install -r requirements.txt\n```\n\n### Commandes uv Essentielles\n\n```bash\n# Synchroniser l'environnement avec pyproject.toml\nuv sync\n\n# Ajouter une d√©pendance de production\nuv add package-name\n\n# Ajouter une d√©pendance de d√©veloppement\nuv add --dev package-name\n\n# Mettre √† jour toutes les d√©pendances\nuv sync --upgrade\n\n# Ex√©cuter la CLI du projet\nuv run lodlink --help\n\n# Ex√©cuter un script Python\nuv run python my_script.py\n\n# Lancer les tests\nuv run pytest\n\n# Formater le code\nuv run black src/\n\n# Linter\nuv run ruff check src/\n```\n\n## üèÉ Workflow de D√©veloppement\n\n### D√©marrage Rapide\n\n```bash\n# 1. Synchroniser les d√©pendances\nuv sync\n\n# 2. V√©rifier que tout fonctionne\nuv run lodlink --help\n\n# 3. Tester sur un chromosome\nuv run lodlink --chr 1 --html --extend-region 3.0\n```\n\n### Ajouter une Nouvelle D√©pendance\n\n```bash\n# 1. Ajouter le package\nuv add requests  # pour production\nuv add --dev pytest  # pour d√©veloppement\n\n# 2. Le package est automatiquement ajout√© √† pyproject.toml\n# 3. uv.lock est automatiquement mis √† jour\n# 4. Commit pyproject.toml \\(PAS uv.lock car gitignored\\)\n```\n\n### Modifier le Code\n\n```bash\n# 1. √âditer les fichiers dans src/lodlink/\n# 2. Les imports DOIVENT √™tre relatifs:\nfrom .config import DiseaseModel  # ‚úÖ\nfrom config import DiseaseModel   # ‚ùå\n\n# 3. Tester imm√©diatement\nuv run lodlink --chr 1 --html\n\n# 4. Formater et linter\nuv run black src/\nuv run ruff check src/\n```\n\n## üìù Conventions de Code\n\n### Imports\n\n**TOUJOURS utiliser des imports relatifs dans src/lodlink/**\n\n```python\n# ‚úÖ CORRECT\nfrom .config import GENO_AA, DiseaseModel\nfrom .data_parser import load_all_data\nfrom .pedigree import Pedigree\n\n# ‚ùå INCORRECT\nfrom config import GENO_AA\nfrom data_parser import load_all_data\nimport pedigree\n```\n\n### Structure des Modules\n\nChaque module a une responsabilit√© claire:\n\n- **config.py**: Constantes, mod√®les de maladie, tables de transmission\n- **data_parser.py**: Streaming parsing des gros fichiers \\(genotyping = 900 MB\\)\n- **pedigree.py**: Analyse de structure, ordre de peeling\n- **lod_engine.py**: Calculs LOD \\(Elston-Stewart algorithm\\)\n- **haplopainter.py**: Visualisations matplotlib\n- **html_viz.py**: Rapports HTML, API Ensembl, Plotly\n- **cli.py**: Interface ligne de commande, orchestration\n\n### Gestion des Gros Fichiers\n\nLe fichier `data/genotyping` fait 900 MB. Le parser utilise:\n- Streaming ligne par ligne\n- Filtrage pr√©coce \\(thinning\\)\n- Barres de progression \\(tqdm\\)\n\n**Ne JAMAIS charger tout le fichier en m√©moire !**\n\n## üß¨ Concepts M√©tier\n\n### Format des Donn√©es\n\n**Pedigree** \\(format Merlin\\):\n```\nFamilyID  IndivID  FatherID  MotherID  Sex  Affection\n1         1        0         0         1    2\n```\n\n**Carte g√©n√©tique**:\n```\nCHR  MARKER    cM      bp\n1    rs12345   0.0     12345\n```\n\n### Algorithmes Cl√©s\n\n1. **Peeling** \\(Elston-Stewart\\):\n   - Parcours optimal du pedigree\n   - Calcul√© dans `pedigree.py`\n   - Utilis√© dans `lod_engine.py`\n\n2. **LOD Param√©trique**:\n   - Likelihood ratio √† diff√©rents Œ∏\n   - Support mod√®les dominant/r√©cessif\n   - P√©n√©trances configurables\n\n3. **NPL \\(Non-Parametric Linkage\\)**:\n   - Score de partage d'all√®les \\(Kong & Cox\\)\n   - Ind√©pendant du mod√®le\n\n4. **Multipoint**:\n   - Lissage gaussien pond√©r√©\n   - Fen√™tre configurable \\(d√©faut: 2 cM\\)\n\n### Annotations G√©niques\n\n- API: Ensembl REST \\(GRCh38/hg38\\)\n- Limite: 4 Mb par r√©gion\n- Filtre: g√®nes prot√©iques prioritaires\n- Format positions: virgules europ√©ennes \\(147,034,273 bp\\)\n\n## üîç Tests et Qualit√©\n\n### Lancer les Tests\n\n```bash\n# Tous les tests\nuv run pytest\n\n# Avec couverture\nuv run pytest --cov=src/lodlink\n\n# Un fichier sp√©cifique\nuv run pytest tests/test_pedigree.py -v\n```\n\n### Formater le Code\n\n```bash\n# Formater automatiquement\nuv run black src/\n\n# V√©rifier sans modifier\nuv run black --check src/\n```\n\n### Linter\n\n```bash\n# V√©rifier\nuv run ruff check src/\n\n# Auto-fix\nuv run ruff check --fix src/\n```\n\n## üêõ Debugging\n\n### Erreurs Courantes\n\n**1. ModuleNotFoundError: No module named 'config'**\n- ‚ùå Probl√®me: Import absolu au lieu de relatif\n- ‚úÖ Solution: `from .config import ...`\n\n**2. Command 'lodlink' not found**\n- ‚ùå Probl√®me: Environnement pas activ√© ou package pas install√©\n- ‚úÖ Solution: Utiliser `uv run lodlink` ou `uv pip install -e .`\n\n**3. Import errors apr√®s modification**\n- ‚ùå Probl√®me: Cache Python \\(.pyc\\) d√©synchronis√©\n- ‚úÖ Solution: `find . -name \"*.pyc\" -delete` et r√©essayer\n\n**4. D√©pendances manquantes**\n- ‚ùå Probl√®me: Pas synchronis√© apr√®s pull\n- ‚úÖ Solution: `uv sync`\n\n### Tests Rapides\n\n```bash\n# Test minimaliste \\(chromosome 1 seulement\\)\nuv run lodlink --chr 1 --html --thin 1.0\n\n# Test genome-wide complet\nuv run lodlink --html --extend-region 3.0\n\n# V√©rifier les imports\nuv run python -c \"from lodlink import DiseaseModel; print\\('OK'\\)\"\n```\n\n## üì¶ Build et Distribution\n\n### Construire le Package\n\n```bash\n# Nettoyer\nrm -rf dist/ build/\n\n# Construire\nuv build\n\n# V√©rifie dist/lodlink-1.0.0-py3-none-any.whl\n```\n\n### Publier sur PyPI\n\n```bash\n# Test sur TestPyPI\nuv publish --index-url https://test.pypi.org/legacy/\n\n# Production\nuv publish\n```\n\n## üìã Checklist de Contribution\n\nAvant de commit:\n\n- [ ] Code format√©: `uv run black src/`\n- [ ] Pas d'erreurs de linting: `uv run ruff check src/`\n- [ ] Imports relatifs corrects\n- [ ] Tests passent: `uv run pytest`\n- [ ] CLI fonctionne: `uv run lodlink --help`\n- [ ] pyproject.toml √† jour \\(si nouvelles d√©pendances\\)\n- [ ] Documentation mise √† jour si n√©cessaire\n\n## üö® Pi√®ges √† √âviter\n\n### ‚ùå Ce qu'il NE FAUT PAS faire\n\n1. **Ne pas utiliser `python` directement**\n   ```bash\n   python run_analysis.py  # ‚ùå FAUX\n   uv run lodlink          # ‚úÖ CORRECT\n   ```\n\n2. **Ne pas utiliser `pip` directement**\n   ```bash\n   pip install numpy       # ‚ùå FAUX\n   uv add numpy           # ‚úÖ CORRECT\n   ```\n\n3. **Ne pas commit uv.lock**\n   - Il est dans .gitignore\n   - Chaque d√©veloppeur le r√©g√©n√®re localement\n\n4. **Ne pas charger data/genotyping en m√©moire**\n   - 900 MB!\n   - Toujours streamer ligne par ligne\n\n5. **Ne pas oublier les imports relatifs**\n   ```python\n   from config import X    # ‚ùå FAUX\n   from .config import X   # ‚úÖ CORRECT\n   ```\n\n6. **Ne pas modifier directement requirements.txt**\n   - C'est obsol√®te\n   - Utiliser `uv add` qui met √† jour pyproject.toml\n\n## üé® Structure du CLI\n\nPoint d'entr√©e: `src/lodlink/cli.py:main\\(\\)`\n\n```python\n[project.scripts]\nlodlink = \"lodlink.cli:main\"\n```\n\nParam√®tres par d√©faut:\n- `--ped data/pedfile.pro`\n- `--map data/map`\n- `--freq data/freq`\n- `--geno data/genotyping`\n- `--thin 0.5`\n- `--extend-region 2.0`\n\n## üìä Performance\n\n### Optimisations en Place\n\n1. **Thinning**: R√©duit marqueurs \\(6690 au lieu de 276789\\)\n2. **Streaming**: Parsing incr√©mental du g√©notypage\n3. **NumPy vectorization**: Calculs matriciels\n4. **Caching**: Ensembl API \\(15 min\\)\n\n### Temps d'Ex√©cution Typique\n\n- Genome-wide \\(thin=0.5\\): ~50 secondes\n- Chromosome seul: ~2-5 secondes\n- Sans thinning: ~10-15 minutes\n\n## üîó Ressources\n\n### Documentation Externe\n\n- **uv**: https://docs.astral.sh/uv/\n- **Python Packaging**: https://packaging.python.org\n- **Ensembl REST API**: https://rest.ensembl.org\n\n### Documentation Interne\n\n- `README.md`: Documentation utilisateur\n- `README_PACKAGE.md`: Description PyPI\n- `UV_COMMANDS.md`: R√©f√©rence commandes uv\n- `PUBLISHING.md`: Guide publication\n- `config_example.txt`: Exemples de configuration\n\n## ü§ù Workflow avec Claude\n\n### Quand l'utilisateur demande de modifier le code\n\n1. **Lire le fichier concern√©**\n   ```python\n   Read: src/lodlink/config.py\n   ```\n\n2. **Faire les modifications**\n   ```python\n   Edit: src/lodlink/config.py\n   ```\n\n3. **Tester imm√©diatement**\n   ```bash\n   uv run lodlink --chr 1 --html\n   ```\n\n4. **Formater**\n   ```bash\n   uv run black src/lodlink/config.py\n   ```\n\n### Quand l'utilisateur veut ajouter une d√©pendance\n\n```bash\n# NE PAS modifier manuellement pyproject.toml\n# Utiliser uv add:\nuv add plotly>=5.0\n```\n\n### Quand l'utilisateur signale un bug\n\n1. Cr√©er un test minimal qui reproduit le bug\n2. Utiliser `uv run python -m pdb` si n√©cessaire\n3. Fixer le code\n4. V√©rifier avec `uv run pytest`\n5. Tester la CLI: `uv run lodlink --chr 1`\n\n## üéØ Points d'Attention Sp√©cifiques\n\n### Pedigree\n\n- Supporte familles multiples \\(family ID\\)\n- Algorithme de peeling automatique\n- G√®re les boucles \\(loop-breakers non impl√©ment√©\\)\n\n### LOD Scores\n\n- Theta de 0.0 √† 0.5 \\(50 valeurs\\)\n- LOD = log10\\(likelihood ratio\\)\n- Seuil significatif: 3.0 par d√©faut\n\n### Visualisations HaploPainter\n\n- Utilise matplotlib \\(backend Agg\\)\n- Couleurs: 8 haplotypes fondateurs\n- 3 g√©n√©rations maximum \\(limitation\\)\n- Barres montrant r√©gions partag√©es\n\n### Rapport HTML\n\n- Plotly pour interactivit√©\n- Ensembl API pour g√®nes\n- Positions format√©es: 147,034,273 bp \\(virgules\\)\n- Limite r√©gions: 4 Mb \\(API Ensembl\\)\n\n## üîÑ Changelog Version\n\nVersion actuelle: **1.0.0**\n\nQuand incr√©menter:\n- **MAJOR** \\(2.0.0\\): Breaking changes\n- **MINOR** \\(1.1.0\\): Nouvelles features\n- **PATCH** \\(1.0.1\\): Bug fixes\n\nModifier dans `pyproject.toml`:\n```toml\n[project]\nversion = \"1.0.1\"\n```\n\n## ‚úÖ Commandes Rapides de R√©f√©rence\n\n```bash\n# Setup initial\nuv sync\n\n# D√©veloppement quotidien\nuv run lodlink --chr 1 --html          # Test rapide\nuv run lodlink --html --extend-region 3.0  # Test complet\nuv run black src/                      # Format\nuv run ruff check src/                # Lint\n\n# Ajouter d√©pendances\nuv add package-name                   # Production\nuv add --dev package-name            # Dev only\n\n# Build et publish\nuv build                             # Construire\nuv publish                          # Publier PyPI\n```\n\n---\n\n**Rappel important**: Ce projet utilise **uv** exclusivement. Toutes les commandes Python doivent passer par `uv run`. Toutes les installations de packages doivent passer par `uv add`.\nEOF)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(find:*)",
      "Bash(git reset:*)"
    ]
  }
}
